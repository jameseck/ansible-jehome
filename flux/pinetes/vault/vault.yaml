---
apiVersion: helm.fluxcd.io/v1
kind: HelmRelease
metadata:
  name: vault
  namespace: vault
spec:
  releaseName: vault
  chart:
    repository: https://kubernetes-charts-incubator.storage.googleapis.com
    name: vault
    version: 0.23.4
  values:
    vault:
      dev: false
      config:
        storage:
          consul:
            address: consul.consul.svc.cluster.local:8500
            path: vault
    consulAgent:
      join: consul.consul.svc.cluster.local
      gossipKeySecretName: consul/consul-gossip-key
